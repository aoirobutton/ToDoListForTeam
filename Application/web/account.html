<html>
    <head>
        <meta http-equiv="content-type" content="text/html; charset=utf-8">
        <title>新規登録</title>
        <link rel="STYLESHEET" href="css/todo.css" type="text/css">
        <script type="text/javascript" src="dwr/engine.js"></script>

        <script type="text/javascript" src="dwr/interface/addaccount.js"></script>
        
        <script type="text/javascript" src="js/jquery-1.7.2.min.js"></script>
        <script type="text/javascript" src="js/jquery.cookie.js"></script>
        <script type="text/javascript" src="js/jquery.serialize.js"></script>
    <script>
function signup(){
    DebugPrint("hoge");
  var form = $('#signup_form').serializeJson();
  DebugPrint("fuga");
  if(form.pass != form.passVerify){
    updateErrorMessage("パスワードが一致しません", null);
    return;
  }
  DebugPrint("foo");
  addaccount.execute(form, {
    callback: function(data){
      updateErrorMessage("ユーザ登録が完了しました．");
    },
    exceptionHandler: updateErrorMessage
  });
    DebugPrint("bar");
}

function updateErrorMessage(message, exception){
  $('#error_msg').text(message);
}
function DebugPrint(str)
{
    var out = document.getElementById("debug");
    if (!out) return;
    out.value += str;
}
    </script>

        
    </head>
    <body>
        <h1>新規登録</h1>
        <hr>
        <div align="center">
            <form id="signup_form">
            <table border="0">
                <!--form action="list.html"-->
                    <tr>
                        <th class="add_field">
                            ユーザー名
                        </th>
                        <td class="add_field">
                            <input type="text" name="user" value="" size="24">
                        </td>
                    </tr>
                    <tr>
                        <th class="add_field">
                            パスワード
                        </th>
                        <td class="add_field">
                            <input type="password" name="pass" value="" size="24">
                        </td>
                    </tr>
                    <tr>
                        <th class="add_field">
                            パスワードの再入力
                        </th>
                        <td class="add_field">
                            <input type="password" name="passVerify" value="" size="24">
                        </td>
                    </tr>
                    <tr>
                        <td colspan="2" class="add_button">
                            <table border="0">
                                <tr>
                                    <td>
                                        <input type="button" value="登録" onclick="signup()">
                                    </td>
                                    <td>
                                        <input type="button" value="キャンセル" onclick="location.href='index.html'">
                                    </td>
                                </tr>
                            </table>
                        </td>
                    </tr>
                <!--/form-->
            </table>
            </form>
                                <br>
<!--textarea cols=50 rows=25 id="debug"></textarea-->
        </div>
            <div id="error_msg" class="error"></div>

    </body>
</html>
